{% extends 'base.html'%}
{%block title%}&nbsp;{%endblock%}
{%block header%}&nbsp;{%endblock%}
{%block content%}
<form method="post">
    {% csrf_token %}
    {{form.id}}
    <div class="row">
        <div class="col-6">
            {{form.facility.label_tag}}
            {{form.facility}}
            {%if form.facility.errors%}
                {%for error in form.facility.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
        <div class="col-6">
            {{form.machine_code.label_tag}}
            {{form.machine_code}}
            {%if form.machine_code.errors%}
                {%for error in form.machine_code.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
    </div><br>
    <div class="row">
        <div class="col-6">
            {{form.code.label_tag}}
            {{form.code}}
            {%if form.code.errors%}
                {%for error in form.code.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
        <div class="col-6">
            {{form.brand_code.label_tag}}
            {{form.brand_code}}
            {%if form.brand_code.errors%}
                {%for error in form.brand_code.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-6">
            {{form.weight_sap.label_tag}}
            {{form.weight_sap}}
            {%if form.weight_sap.errors%}
                {%for error in form.weight_sap.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
        <div class="col-6">
            {{form.weight_brand.label_tag}}
            {{form.weight_brand}}
            {%if form.weight_brand.errors%}
                {%for error in form.weight_brand.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
    </div><br>
    <div class="row">
        <div class="col-6">
            {{form.engine_no.label_tag}}
            {{form.engine_no}}
            {%if form.engine_no.errors%}
                {%for error in form.engine_no.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
        <div class="col-6">
            {{form.cup.label_tag}}
            {{form.cup}}
            {%if form.cup.errors%}
                {%for error in form.cup.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
    </div><br>
    <div class="row">
        <div class="col-6">
            {{form.machine_type.label_tag}}
            {{form.machine_type}}
            {%if form.machine_type.errors%}
                {%for error in form.machine_type.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
        <div class="col-6">
            {{form.sale_type.label_tag}}
            {{form.sale_type}}
            {%if form.sale_type.errors%}
                {%for error in form.sale_type.errors%}
                <small class="text-danger"><i class="bi bi-exclamation-circle"></i>&nbsp;{{error|escape}}</small>
                {%endfor%}
            {%endif%}
        </div>
    </div><br>
    <div class="row">
        <div class="col-6">
            {{form.remark.label}}
            {{form.remark}}
        </div>
    </div><br>
    <div class="row">
        <div class="col-6">
            {{form.product}}
            {{form.product.label}}
        </div>
    </div><br>
    <div class="row">
        <div class="col text-end">
            <button type="submit" class="btn btn-outline-primary"><i class="bi bi-save"></i>&nbsp;保存</button>&nbsp;&nbsp;
            <a class="btn btn-outline-secondary" href="{%url 'pp_master:modelcodes'%}"><i class="bi bi-arrow-left"></i>&nbsp;返回</a>
        </div>
    </div>
</form>
{%endblock%}
{%block scripts%}
{{block.super}}
$(function(){
    $('#id_facility').change(function(){
        var id = $(this).val()
        if(!id)
            id = '000000000'
        //alert('Facility id is : '+id)
        $.post('/pp_master/machine_code/get/'+id, {}, function(data){
            //alert(data)
            $('#id_machine_code').html(data)
        }, 'html')
    })
})
{%endblock%}